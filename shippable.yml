language: java

jdk:
  - oraclejdk8

build:
  pre_ci_boot:
    image_name: devopsrecipes/build_custom_ci
    image_tag: 582020
    pull: true

  ci:
    - |
       mkdir -p shippable/testresults
       mkdir -p shippable/codecoverage
       mkdir -p .m2
    - shipctl replace temp/settings.xml pom.xml
    - cp temp/settings.xml .m2/
    - mvn -q -B clean cobertura:cobertura install
    - mvn deploy
    - ls -al $SHIPPABLE_BUILD_DIR/target

integrations:
  generic:
    - integrationName: drship_nexus
